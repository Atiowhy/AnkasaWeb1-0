'use client';
import React, { useState } from 'react';
import iconFlight from '../../../public/image/Group 25.png';
import './styles.css';
import axios from 'axios';
import Swal from 'sweetalert2';
import { useRouter } from 'next/navigation';
import Image from 'next/image';
import Link from 'next/link';

export default function Login() {
  const router = useRouter();
  const [eye, setEye] = useState(false);
  const [loading, setLoading] = useState(false);
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleEye = () => {
    if (eye) {
      setEye(false);
    } else {
      setEye(true);
    }
  };

  const handelSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    Swal.fire({
      title: 'Loading...',
      allowOutsideClick: false, // Mencegah interaksi selama loading
      onBeforeOpen: () => {
        Swal.showLoading();
      },
    });

    try {
      const response = await axios.post(
        'https://easy-lime-seal-toga.cyclic.app/auth/login',
        {
          email,
          password,
        }
      );
      Swal.fire({
        icon: 'success',
        title: 'Login Success!',
        timer: 2000,
        showConfirmButton: true,
      }).then(() => {
        const token = response.data.data.access_token;
        console.log(response.data.data.access_token);
        localStorage.setItem('token', token);
        router.push('/home');
        setLoading(false);
      });
    } catch (error) {
      setLoading(false);
      Swal.fire({
        icon: 'error',
        title: 'Oops...',
        text: error.response?.data?.message,
      });
    }
  };
  return (
    <div className="row">
      <div className="col-md-6 bg-warning">
        <div className="leftSide">
          {/* <svg
            width="700"
            height="1000"
            viewBox="0 0 700 1000"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="700" height="1000" fill="#2395FF" />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M342.906 308.546C433.659 286.831 482.246 377.766 529.194 445.026C573.831 508.973 633.584 582.887 579.441 647.415C519.841 718.445 406.591 726.423 319.072 695.447C242.341 668.289 213.375 594.463 217.994 519.487C223.249 434.186 248.165 331.215 342.906 308.546Z"
              fill="white"
              fill-opacity="0.25"
            />
            <path
              d="M295.999 582.269C298.184 585.514 301.254 587.355 304.466 587.35L349.9 587.265C353.486 587.258 357.02 586.101 360.216 583.887L461.483 513.834C470.79 507.396 479.132 498.206 484.809 486.169C491.181 472.657 491.874 462.879 489.358 455.971C486.848 449.058 480.747 443.981 469.084 442.947C458.695 442.027 448.362 445.756 439.055 452.189L404.769 475.907L328.652 436.974C327.737 436.133 326.674 435.641 325.572 435.549C324.471 435.456 323.371 435.766 322.387 436.447L299.503 452.279C295.79 454.846 294.892 461.602 297.704 465.815L352.075 512.359L316.154 537.211L290.973 519.907C290.105 519.311 289.147 519.001 288.175 519.003C287.204 519.005 286.246 519.318 285.38 519.917L271.413 529.581C267.779 532.096 266.822 538.653 269.474 542.904L295.999 582.269Z"
              fill="white"
            />
            <path
              d="M284.445 708.037C285.212 709.174 286.289 709.819 287.416 709.817L303.351 709.787C304.609 709.785 305.848 709.379 306.97 708.604L342.488 684.058C345.753 681.802 348.679 678.582 350.67 674.365C352.905 669.63 353.148 666.204 352.265 663.784C351.385 661.362 349.245 659.583 345.155 659.22C341.511 658.898 337.886 660.205 334.622 662.459L322.596 670.769L295.899 657.127C295.578 656.833 295.205 656.661 294.818 656.628C294.432 656.596 294.046 656.704 293.701 656.943L285.675 662.49C284.372 663.39 284.057 665.757 285.044 667.233L304.114 683.541L291.515 692.249L282.683 686.186C282.378 685.977 282.042 685.869 281.702 685.869C281.361 685.87 281.025 685.979 280.721 686.189L275.822 689.576C274.548 690.457 274.212 692.754 275.142 694.244L284.445 708.037Z"
              fill="#E7F3FF"
            />
            <path
              d="M542.106 536.816C542.873 537.953 543.95 538.598 545.076 538.597L561.012 538.567C562.27 538.565 563.509 538.159 564.63 537.383L600.149 512.838C603.413 510.582 606.34 507.362 608.331 503.145C610.566 498.41 610.809 494.984 609.926 492.563C609.046 490.141 606.906 488.363 602.815 488C599.171 487.678 595.547 488.984 592.283 491.239L580.257 499.549L553.559 485.907C553.238 485.613 552.865 485.44 552.479 485.408C552.093 485.376 551.707 485.484 551.362 485.723L543.335 491.27C542.033 492.169 541.718 494.537 542.704 496.013L561.775 512.321L549.176 521.029L540.343 514.966C540.039 514.757 539.703 514.648 539.362 514.649C539.021 514.65 538.686 514.759 538.382 514.969L533.483 518.356C532.208 519.237 531.873 521.534 532.803 523.024L542.106 536.816Z"
              fill="#9DD0FF"
            />
            <path
              d="M437.554 349.864C437.946 350.433 438.495 350.755 439.071 350.754L447.208 350.739C447.85 350.738 448.483 350.535 449.056 350.147L467.193 337.875C468.86 336.747 470.354 335.137 471.371 333.028C472.512 330.661 472.636 328.948 472.186 327.738C471.736 326.526 470.643 325.637 468.555 325.456C466.694 325.295 464.843 325.948 463.176 327.075L457.035 331.23L443.403 324.409C443.239 324.262 443.048 324.176 442.851 324.16C442.654 324.144 442.457 324.198 442.281 324.317L438.182 327.091C437.517 327.541 437.356 328.724 437.86 329.462L447.598 337.616L441.164 341.97L436.654 338.939C436.499 338.834 436.327 338.78 436.153 338.78C435.979 338.781 435.807 338.835 435.652 338.94L433.151 340.634C432.5 341.074 432.329 342.223 432.804 342.968L437.554 349.864Z"
              fill="#C8E4FF"
            />
          </svg> */}
        </div>
      </div>
      <div className="col-md-6">
        <div className="boxModel h-100 ">
          <div className="p-5">
            <svg
              width="158"
              height="36"
              viewBox="0 0 158 36"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M76.928 22.808H70.256L69.152 26H65.624L71.648 9.224H75.56L81.584 26H78.032L76.928 22.808ZM76.016 20.12L73.592 13.112L71.168 20.12H76.016ZM91.2037 12.512C92.7877 12.512 94.0677 13.016 95.0437 14.024C96.0197 15.016 96.5077 16.408 96.5077 18.2V26H93.1477V18.656C93.1477 17.6 92.8837 16.792 92.3557 16.232C91.8277 15.656 91.1077 15.368 90.1957 15.368C89.2677 15.368 88.5317 15.656 87.9877 16.232C87.4597 16.792 87.1957 17.6 87.1957 18.656V26H83.8357V12.704H87.1957V14.36C87.6437 13.784 88.2117 13.336 88.8997 13.016C89.6037 12.68 90.3717 12.512 91.2037 12.512ZM107.575 26L103.063 20.336V26H99.7029V8.24H103.063V18.344L107.527 12.704H111.895L106.039 19.376L111.943 26H107.575ZM112.854 19.304C112.854 17.96 113.118 16.768 113.646 15.728C114.191 14.688 114.919 13.888 115.831 13.328C116.759 12.768 117.791 12.488 118.927 12.488C119.919 12.488 120.783 12.688 121.519 13.088C122.271 13.488 122.871 13.992 123.319 14.6V12.704H126.703V26H123.319V24.056C122.887 24.68 122.287 25.2 121.519 25.616C120.767 26.016 119.895 26.216 118.903 26.216C117.783 26.216 116.759 25.928 115.831 25.352C114.919 24.776 114.191 23.968 113.646 22.928C113.118 21.872 112.854 20.664 112.854 19.304ZM123.319 19.352C123.319 18.536 123.159 17.84 122.839 17.264C122.519 16.672 122.087 16.224 121.543 15.92C120.999 15.6 120.415 15.44 119.791 15.44C119.167 15.44 118.591 15.592 118.062 15.896C117.535 16.2 117.103 16.648 116.767 17.24C116.447 17.816 116.287 18.504 116.287 19.304C116.287 20.104 116.447 20.808 116.767 21.416C117.103 22.008 117.535 22.464 118.062 22.784C118.607 23.104 119.183 23.264 119.791 23.264C120.415 23.264 120.999 23.112 121.543 22.808C122.087 22.488 122.519 22.04 122.839 21.464C123.159 20.872 123.319 20.168 123.319 19.352ZM135.072 26.216C133.984 26.216 133.008 26.024 132.144 25.64C131.28 25.24 130.592 24.704 130.08 24.032C129.584 23.36 129.312 22.616 129.264 21.8H132.648C132.712 22.312 132.96 22.736 133.392 23.072C133.84 23.408 134.392 23.576 135.048 23.576C135.688 23.576 136.184 23.448 136.536 23.192C136.904 22.936 137.088 22.608 137.088 22.208C137.088 21.776 136.864 21.456 136.416 21.248C135.984 21.024 135.288 20.784 134.328 20.528C133.336 20.288 132.52 20.04 131.88 19.784C131.256 19.528 130.712 19.136 130.248 18.608C129.8 18.08 129.576 17.368 129.576 16.472C129.576 15.736 129.784 15.064 130.2 14.456C130.632 13.848 131.24 13.368 132.024 13.016C132.824 12.664 133.76 12.488 134.832 12.488C136.416 12.488 137.68 12.888 138.624 13.688C139.568 14.472 140.088 15.536 140.184 16.88H136.968C136.92 16.352 136.696 15.936 136.296 15.632C135.912 15.312 135.392 15.152 134.736 15.152C134.128 15.152 133.656 15.264 133.32 15.488C133 15.712 132.84 16.024 132.84 16.424C132.84 16.872 133.064 17.216 133.512 17.456C133.96 17.68 134.656 17.912 135.6 18.152C136.56 18.392 137.352 18.64 137.976 18.896C138.6 19.152 139.136 19.552 139.584 20.096C140.048 20.624 140.288 21.328 140.304 22.208C140.304 22.976 140.088 23.664 139.656 24.272C139.24 24.88 138.632 25.36 137.832 25.712C137.048 26.048 136.128 26.216 135.072 26.216ZM142.198 19.304C142.198 17.96 142.462 16.768 142.99 15.728C143.534 14.688 144.262 13.888 145.174 13.328C146.102 12.768 147.134 12.488 148.27 12.488C149.262 12.488 150.126 12.688 150.862 13.088C151.614 13.488 152.214 13.992 152.662 14.6V12.704H156.046V26H152.662V24.056C152.23 24.68 151.63 25.2 150.862 25.616C150.11 26.016 149.238 26.216 148.246 26.216C147.126 26.216 146.102 25.928 145.174 25.352C144.262 24.776 143.534 23.968 142.99 22.928C142.462 21.872 142.198 20.664 142.198 19.304ZM152.662 19.352C152.662 18.536 152.502 17.84 152.182 17.264C151.862 16.672 151.43 16.224 150.886 15.92C150.342 15.6 149.758 15.44 149.134 15.44C148.51 15.44 147.934 15.592 147.406 15.896C146.878 16.2 146.446 16.648 146.11 17.24C145.79 17.816 145.63 18.504 145.63 19.304C145.63 20.104 145.79 20.808 146.11 21.416C146.446 22.008 146.878 22.464 147.406 22.784C147.95 23.104 148.526 23.264 149.134 23.264C149.758 23.264 150.342 23.112 150.886 22.808C151.43 22.488 151.862 22.04 152.182 21.464C152.502 20.872 152.662 20.168 152.662 19.352Z"
                fill="#414141"
              />
              <path
                d="M6.29307 33.9371C6.78369 34.6656 7.47274 35.0788 8.19382 35.0777L18.3921 35.0586C19.1969 35.0571 19.9901 34.7973 20.7076 34.3003L43.4385 18.576C45.5275 17.1308 47.4001 15.068 48.6743 12.3661C50.1047 9.3331 50.2602 7.1382 49.6954 5.5876C49.1321 4.03594 47.7626 2.89642 45.1447 2.66425C42.8127 2.45765 40.4932 3.29472 38.4042 4.73882L30.7082 10.0626L13.6226 1.32345C13.4172 1.1348 13.1785 1.02438 12.9313 1.00359C12.6841 0.982812 12.4373 1.05243 12.2164 1.20524L7.07978 4.75905C6.2462 5.3352 6.04464 6.85172 6.67588 7.79742L18.8803 18.2448L10.8172 23.8231L5.16497 19.9392C4.97023 19.8053 4.75514 19.7358 4.53706 19.7361C4.31898 19.7365 4.10401 19.8068 3.90952 19.9413L0.774426 22.1106C-0.0411833 22.6751 -0.256023 24.1469 0.339278 25.1011L6.29307 33.9371Z"
                fill="#2395FF"
              />
            </svg>
          </div>
          <div className="ps-5 pb-2">
            <h1>LOGIN</h1>
          </div>
          <div className="w-100 p-5 pt-0">
            <form onSubmit={handelSubmit}>
              <div class="mb-3">
                <input
                  type="email"
                  className="form-control border-0 border-2 border-bottom border-primary shadow"
                  placeholder="Email Address"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                />
              </div>
              <div class="mb-3">
                <input
                  type="password"
                  class="form-control border-0 border-2 border-bottom border-primary shadow"
                  placeholder="Your Password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                />
                <div className="mt-1 d-flex justify-content-end text-muted">
                  <p>Forgot Password ?</p>
                </div>
              </div>
              <div>
                <button type="submit" class="btn w-100 text-light">
                  Log In
                </button>
                <div className="p-2 d-flex justify-content-center">
                  <p>Dont have an account?</p>
                  <Link href="/register" className="text-decoration-none ms-1">
                    Register
                  </Link>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  );
}
